<div class="absolute inset-0 flex min-w-0 flex-col overflow-y-auto" cdkScrollable>
    <!-- Header -->
    <div
        class="bg-card flex flex-col items-start border-b p-6 dark:bg-transparent sm:flex-row sm:items-center sm:justify-between sm:py-12 md:px-8">
        <!-- Title -->
        <div *transloco="let t">
            <ng-container>
                <div class="text-4xl font-extrabold leading-none tracking-tight">
                    {{ t('events.existing') }}
                </div>
            </ng-container>
            <div class="text-secondary mt-0.5 flex items-center font-medium">
                @if (events?.length) {
                Total {{ events?.length }} {{ t('events.title') }}
                }
            </div>
        </div>
        <!-- Actions -->
        <div class="mt-4 sm:mt-0">
            <!-- Upload button -->
            <button mat-flat-button [color]="'primary'" routerLink="/event-setup">
                <mat-icon [svgIcon]="'heroicons_outline:plus'"></mat-icon>
                <span class="ml-2 mr-1" *transloco="let t">{{ t('events.new') }}</span>
            </button>
        </div>
    </div>

    <!-- Main -->
    <div class="flex flex-auto p-6 sm:p-10">
        <div class="mx-auto flex w-full max-w-xs flex-auto flex-col sm:max-w-5xl">
            <!-- Filters -->
            <div class="flex w-full max-w-xs flex-col items-center justify-between sm:max-w-none sm:flex-row">
                <mat-form-field class="w-full sm:w-36" [subscriptSizing]="'dynamic'">
                    <mat-select [value]="'all'" (selectionChange)="filterByStatus($event)">
                        <mat-option [value]="'all'">All</mat-option>
                        @for (
                        status of availableStaus;
                        track $index
                        ) {
                        <mat-option [value]="status.title">{{
                            status.title
                            }}</mat-option>
                        }
                    </mat-select>
                </mat-form-field>
                <mat-form-field class="mt-4 w-full sm:ml-4 sm:mt-0 sm:w-72" [subscriptSizing]="'dynamic'">
                    <mat-icon matPrefix class="icon-size-5" [svgIcon]="'heroicons_solid:magnifying-glass'"></mat-icon>
                    <input (input)="filterByQuery(query.value)" placeholder="Search by title or description" matInput
                        #query />
                </mat-form-field>
                <mat-slide-toggle class="mt-8 sm:ml-auto sm:mt-0" [color]="'primary'"
                    (change)="toggleCompleted($event)">
                    Hide completed
                </mat-slide-toggle>
            </div>
            <!-- Courses -->
            @if (this.filteredEvents.length) {
            <div class="mt-8 grid grid-cols-1 gap-8 sm:mt-10 sm:grid-cols-2 lg:grid-cols-3">
                @for (
                event of filteredEvents;
                track $index
                ) {
                <!-- Event -->
                <div class="bg-card flex h-96 flex-col overflow-hidden rounded-2xl shadow">
                    <div class="flex flex-col p-6">
                        <div class="flex items-center justify-between">
                            <!-- Event status -->
                            <!-- 'bg-blue-100 text-blue-800 dark:bg-blue-500 dark:text-blue-50':
                            'bg-amber-100 text-amber-800 dark:bg-amber-500 dark:text-amber-50':
                            event.title === false, -->

                            <div class="rounded-full px-3 py-0.5 text-sm font-semibold" [ngClass]="{
                                                'bg-green-100 text-green-800 dark:bg-green-500 dark:text-green-50':
                                                event.status === true,
                                                'bg-pink-100 text-pink-800 dark:bg-pink-500 dark:text-pink-50':
                                                event.status === false,
                                            }">
                                {{ event.status ? 'Active':'Ended' }}
                            </div>


                        </div>
                        <!-- Course title & description -->
                        <div class="mt-4 text-lg font-medium">
                            {{ event.title }}
                        </div>
                        <div class="text-secondary mt-0.5 line-clamp-2">
                            {{ event.title }}
                        </div>
                        <div class="my-6 h-1 w-12 border-t-2"></div>
                        <!-- event time -->
                        <div class="flex items-center leading-5 text-md text-secondary">
                            <mat-icon class="icon-size-5 text-hint" [svgIcon]="'heroicons_solid:clock'"></mat-icon>
                            <div class="ml-1.5">
                                {{ event.startDate | date:'MMM dd, y'}} -
                                {{ event.endDate| date:'MMM dd, y' }}
                            </div>
                        </div>

                    </div>
                    <!-- Footer -->
                    <div class="mt-auto flex w-full flex-col">
                        <!-- Course progress -->
                        <div class="relative h-0.5">
                            <div class="absolute inset-x-0 z-10 -mt-3 h-6" [matTooltip]="
                                            10 / 10 | percent
                                        " [matTooltipPosition]="'above'" [matTooltipClass]="'-mb-0.5'"></div>
                            <mat-progress-bar class="h-0.5" [value]="
                                            (100 *
                                                10) / 10
                                        "></mat-progress-bar>
                        </div>


                        <div class="flex flex-row justify-between px-6 py-4 text-right dark:bg-transparent">
                            <a mat-stroked-button [routerLink]="['/event-setup/' + event.id ]">
                                <span class="inline-flex items-center">
                                    <span>Edit</span>

                                    <mat-icon class="ml-1.5 icon-size-5" [svgIcon]="
                                                                                    'heroicons_solid:pencil'
                                                                                "></mat-icon>
                                </span>
                            </a>
                            <a mat-stroked-button [routerLink]="[event.id]">
                                <span class="inline-flex items-center">
                                    <span>View</span>

                                    <mat-icon class="ml-1.5 icon-size-5" [svgIcon]="
                                                                                        'heroicons_solid:arrow-small-right'
                                                                                    "></mat-icon>
                                </span>
                            </a>
                        </div>
                    </div>
                </div>
                }
            </div>
            } @else {
            <div class="flex flex-auto flex-col items-center justify-center bg-gray-100 dark:bg-transparent">
                <mat-icon class="icon-size-24" [svgIcon]="'heroicons_outline:document-magnifying-glass'"></mat-icon>
                <div class="text-secondary mt-6 text-2xl font-semibold tracking-tight">
                    No Eevnts found!
                </div>
            </div>
            }

            <!-- No courses -->
        </div>
    </div>
</div>