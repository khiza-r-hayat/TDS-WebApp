<div class="w-full max-w-3xl" *transloco="let t">

    <!-- Avatar -->
    <div class="my-8 flex flex-col">
        <div
            class="ring-bg-card relative flex h-32 w-32 items-center justify-center overflow-hidden rounded-full ring-4">
            <!-- Upload / Remove avatar -->
            <div class="absolute inset-0 z-10 bg-black bg-opacity-50"></div>
            <div class="absolute inset-0 z-20 flex items-center justify-center">
                <div>
                    <input id="avatar-file-input" class="pointer-events-none invisible absolute h-0 w-0 opacity-0"
                        type="file" [multiple]="false" [accept]="
                                                'image/jpeg, image/png, image/jpg' 
                                            " (change)="uploadAvatar(avatarFileInput.files)" #avatarFileInput />
                    <label class="flex h-10 w-10 cursor-pointer items-center justify-center rounded-full hover:bg-hover"
                        for="avatar-file-input" matRipple>
                        <mat-icon class="text-white" [svgIcon]="
                                                    'heroicons_outline:camera'
                                                "></mat-icon>
                    </label>
                </div>
                <div>
                    <button mat-icon-button (click)="removeAvatar()">
                        <mat-icon class="text-white" [svgIcon]="
                                                    'heroicons_outline:trash'
                                                "></mat-icon>
                    </button>
                </div>
            </div>
            <!-- Image/Letter -->
            @if(pictureUrl){
            <img class="h-full w-full object-cover" [src]="pictureUrl" />
            }
        </div>
    </div>

    <!-- Form -->
    <form [formGroup]="userForm" class="w-full" autocomplete="off">


        <!-- Section -->
        <div class="w-full">
            <div class="text-xl">{{t('Profile')}}</div>
            <div class="text-secondary">{{t('Following information is publicly displayed')}}</div>
        </div>
        <div class="grid sm:grid-cols-4 gap-x-4 w-full mt-8">
            <!-- Name -->
            <div class="sm:col-span-2">
                <mat-form-field class="fuse-mat-no-subscript w-full">
                    <mat-label>{{ t('First Name') }}</mat-label>
                    <mat-icon matPrefix class="hidden icon-size-5 sm:flex" [svgIcon]="
                    'heroicons_solid:user-circle'
                "></mat-icon>
                    <input [formControlName]="'firstName'" matInput />
                </mat-form-field>
            </div>
            <!-- Name -->
            <div class="sm:col-span-2">
                <mat-form-field class="fuse-mat-no-subscript w-full">
                    <mat-label>{{ t('Last Name') }}</mat-label>
                    <mat-icon matPrefix class="hidden icon-size-5 sm:flex" [svgIcon]="
                'heroicons_solid:user-circle'
            "></mat-icon>
                    <input [formControlName]="'lastName'" matInput />
                </mat-form-field>
            </div>
            <!-- Email -->
            <div class="sm:col-span-2">
                <mat-form-field class="fuse-mat-no-subscript w-full">
                    <mat-label>{{ t('Email') }}</mat-label>
                    <mat-icon class="icon-size-5" [svgIcon]="'heroicons_solid:envelope'" matPrefix></mat-icon>
                    <input id="email" [formControlName]="'email'" matInput />
                </mat-form-field>
            </div>
            <!-- Phone -->
            <div class="sm:col-span-2">
                <mat-form-field class="fuse-mat-no-subscript w-full">
                    <mat-label>{{ t('Phone') }}</mat-label>
                    <mat-icon class="icon-size-5" [svgIcon]="'heroicons_solid:tag'" matPrefix></mat-icon>
                    <input id="email" [formControlName]="'phone'" matInput />
                    @if (
                    userForm.get('phone').hasError('required')
                    ) {
                    <mat-error>Phone is required.</mat-error>
                    }
                </mat-form-field>
            </div>
            <!-- Role -->
            <div class="sm:col-span-2">
                <mat-form-field class="fuse-mat-no-subscript w-full">
                    <mat-label>{{ t('Role') }}</mat-label>
                    <mat-icon class="icon-size-5" [svgIcon]="
                        'heroicons_solid:building-office-2'
                    " matPrefix></mat-icon>
                    <input [formControlName]="'role'" matInput />
                </mat-form-field>
            </div>
            <!-- <div class="sm:col-span-2">
                <mat-form-field class="fuse-mat-no-subscript w-full">
                    <mat-label>{{ t('Position') }}</mat-label>
                    <mat-icon class="icon-size-5" [svgIcon]="
                        'heroicons_solid:building-office-2'
                    " matPrefix></mat-icon>
                    <input [formControlName]="'position'" matInput />
                </mat-form-field>
            </div>
            <div class="sm:col-span-2">
                <mat-form-field class="fuse-mat-no-subscript w-full">
                    <mat-label>{{ t('Country') }}</mat-label>
                    <mat-icon class="icon-size-5" [svgIcon]="
                        'heroicons_solid:building-office-2'
                    " matPrefix></mat-icon>
                    <input [placeholder]="t('Country')" [formControlName]="'country'" matInput />
                </mat-form-field>
            </div>
            <div class="sm:col-span-2">
                <mat-form-field class="fuse-mat-no-subscript w-full">
                    <mat-label>{{ t('Region') }}</mat-label>
                    <mat-icon class="icon-size-5" [svgIcon]="
                        'heroicons_solid:building-office-2'
                    " matPrefix></mat-icon>
                    <input [formControlName]="'region'" matInput />
                </mat-form-field>
            </div>
            <div class="sm:col-span-2">
                <mat-form-field class="fuse-mat-no-subscript w-full">
                    <mat-label>{{ t('Sub Region') }}</mat-label>
                    <mat-icon class="icon-size-5" [svgIcon]="
                        'heroicons_solid:building-office-2'
                    " matPrefix></mat-icon>
                    <input [formControlName]="'subRegion'" matInput />
                </mat-form-field>
            </div>
            <div class="sm:col-span-2">
                <mat-form-field class="fuse-mat-no-subscript w-full">
                    <mat-label>{{ t('Branches') }}</mat-label>
                    <mat-icon class="icon-size-5" [svgIcon]="
                        'heroicons_solid:building-office-2'
                    " matPrefix></mat-icon>
                    <input [formControlName]="'branch'" matInput />
                </mat-form-field>
            </div>
            <div class="sm:col-span-2">
                <mat-form-field class="fuse-mat-no-subscript w-full">
                    <mat-label>{{ t('Joining Date') }}</mat-label>
                    <mat-icon class="icon-size-5" [svgIcon]="'heroicons_solid:bars-3-bottom-left'" matPrefix></mat-icon>
                    <input matInput [matDatepicker]="dateJoined" [formControlName]="'dateJoined'">
                    <mat-datepicker-toggle matIconSuffix [for]="dateJoined"></mat-datepicker-toggle>
                    <mat-datepicker #dateJoined></mat-datepicker>
                </mat-form-field> 
            </div>
            <div class="sm:col-span-2">
                <mat-form-field class="fuse-mat-no-subscript w-full">
                    <mat-label>{{ t('On Leave') }}</mat-label>
                    <mat-icon class="icon-size-5" [svgIcon]="'heroicons_solid:envelope'" matPrefix></mat-icon>
                    <input [formControlName]="'vacation'" matInput />
                </mat-form-field>
            </div> -->
            <!-- <div class="sm:col-span-2">
                <mat-form-field class="fuse-mat-no-subscript w-full">
                    <mat-label>{{ t('Supervisor') }}</mat-label>
                    <mat-icon class="icon-size-5" [svgIcon]="
                        'heroicons_solid:building-office-2'
                    " matPrefix></mat-icon>
                    <input [formControlName]="'supervisor'" matInput  />
                </mat-form-field>
            </div> -->


        </div>
    </form>
    <div class="flex justify-end mt-4">
        <button class="ml-2" mat-flat-button [color]="'primary'" [disabled]="!pictureUrl || isSaving()"
            [matTooltip]="t('Save')" (click)="updateAccount()" *transloco="let t">
            {{ t('Save') }}
        </button>
    </div>

</div>